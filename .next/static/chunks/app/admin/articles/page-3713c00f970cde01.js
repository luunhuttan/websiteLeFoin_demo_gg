(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{1721:function(e,t,n){Promise.resolve().then(n.bind(n,865))},865:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n(3827),r=n(4090),a=n(7907),o=n(1126),l=n(5495);function s(){let e=(0,o.useSession)(),{t}=(0,l.useLanguage)(),[n,s]=(0,r.useState)([]),[d,c]=(0,r.useState)(!0),[u,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[x,f]=(0,r.useState)("vi"),[y,v]=(0,r.useState)({vi:"",en:""}),[b,m]=(0,r.useState)({vi:"",en:""}),[j,S]=(0,r.useState)({vi:"",en:""}),[w,k]=(0,r.useState)(!1),[C,T]=(0,r.useState)(""),[R,W]=(0,r.useState)(null),[z,B]=(0,r.useState)("vi"),[E,N]=(0,r.useState)({vi:"",en:""}),[A,L]=(0,r.useState)({vi:"",en:""}),[O,V]=(0,r.useState)({vi:"",en:""}),[M,D]=(0,r.useState)(!1),[H,I]=(0,r.useState)(""),[P,q]=(0,r.useState)(""),[J,K]=(0,r.useState)(!1),[_,F]=(0,r.useState)(""),[U,X]=(0,r.useState)(!1),[Q,G]=(0,r.useState)([]),[Y,Z]=(0,r.useState)([]),[$,ee]=(0,r.useState)([]),[et,en]=(0,r.useState)(""),[ei,er]=(0,r.useState)(""),[ea,eo]=(0,r.useState)("Tất cả"),[el,es]=(0,r.useState)(""),ed=(0,a.useRouter)();(0,r.useEffect)(()=>{if("authenticated"===e.status){if("admin"!==e.data.user.role){ed.replace("/");return}ec()}},[e,ed]);let ec=()=>{c(!0),fetch("/api/articles").then(e=>e.json()).then(e=>{console.log("API /api/articles data:",e),s(e),c(!1)}).catch(()=>{g("Kh\xf4ng thể tải danh s\xe1ch b\xe0i viết"),c(!1)})},eu=async(e,t,n)=>{var i;let r=null===(i=e.target.files)||void 0===i?void 0:i[0];if(r){if(r.size>5242880){alert("File qu\xe1 lớn. Vui l\xf2ng chọn file nhỏ hơn 5MB.");return}if(!r.type.startsWith("image/")){alert("Vui l\xf2ng chọn file ảnh hợp lệ.");return}n(!0);try{let e=new FormData;e.append("file",r);let n=await fetch("/api/upload",{method:"POST",body:e});if(!n.ok)throw Error("Upload failed");let i=await n.json();t(i.url),console.log("Upload th\xe0nh c\xf4ng:",i.url)}catch(e){alert("C\xf3 lỗi xảy ra khi upload ảnh. Vui l\xf2ng thử lại."),console.error("Upload error:",e)}finally{n(!1)}}},eg=async e=>{e.preventDefault(),k(!0),T("");let t=Array.isArray(Q)?Q:Q?[Q]:[];console.log("Submit new article, tags:",t);let n=JSON.stringify({vi:{title:y.vi,excerpt:b.vi,content:j.vi,image:P},en:{title:y.en,excerpt:b.en,content:j.en,image:P}}),i=await fetch("/api/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:y.vi,content:n,tags:t})});i.ok?(p(!1),v({vi:"",en:""}),m({vi:"",en:""}),S({vi:"",en:""}),q(""),G([]),ec()):T((await i.json()).error||"C\xf3 lỗi xảy ra"),k(!1)},eh=async t=>{var n;window.confirm("Bạn c\xf3 chắc chắn muốn x\xf3a b\xe0i viết n\xe0y?")&&((await fetch("/api/articles/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(JSON.stringify((null===(n=e.data)||void 0===n?void 0:n.user)||{}))}})).ok?ec():alert("C\xf3 lỗi xảy ra khi x\xf3a b\xe0i viết"))},ep=e=>{W(e.id);try{var t,n,i,r,a,o,l;let s=JSON.parse(e.content);N({vi:(null===(t=s.vi)||void 0===t?void 0:t.title)||"",en:(null===(n=s.en)||void 0===n?void 0:n.title)||""}),L({vi:(null===(i=s.vi)||void 0===i?void 0:i.excerpt)||"",en:(null===(r=s.en)||void 0===r?void 0:r.excerpt)||""}),V({vi:(null===(a=s.vi)||void 0===a?void 0:a.content)||"",en:(null===(o=s.en)||void 0===o?void 0:o.content)||""}),F((null===(l=s.vi)||void 0===l?void 0:l.image)||""),e.tags&&Array.isArray(e.tags)?Z(e.tags.map(e=>e.name)):Z([])}catch(e){N({vi:"",en:""}),L({vi:"",en:""}),V({vi:"",en:""}),F(""),Z([])}I("")},ex=async t=>{t.preventDefault(),D(!0),I("");let n=Array.isArray(Y)?Y:Y?[Y]:[];console.log("Submit edit article, tags:",n);let i=JSON.stringify({vi:{title:E.vi,excerpt:A.vi,content:O.vi,image:_},en:{title:E.en,excerpt:A.en,content:O.en,image:_}});if(!e.data||!e.data.user){I("Bạn chưa đăng nhập hoặc phi\xean đăng nhập đ\xe3 hết hạn."),D(!1);return}let r=e.data.user,a=await fetch("/api/articles/".concat(R),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(JSON.stringify(r))},body:JSON.stringify({title:E.vi,content:i,tags:n})});a.ok?(W(null),N({vi:"",en:""}),L({vi:"",en:""}),V({vi:"",en:""}),F(""),Z([]),ec()):I((await a.json()).error||"C\xf3 lỗi xảy ra"),D(!1)};(0,r.useEffect)(()=>{fetch("/api/tags").then(e=>e.json()).then(e=>{Array.isArray(e)?ee(e.map(e=>e.name)):ee([])}).catch(()=>ee([]))},[h,R]);let ef=n.filter(e=>{var t;let n="Tất cả"===ea||(null===(t=e.tags)||void 0===t?void 0:t.some(e=>e.name===ea)),i=e.title.toLowerCase().includes(el.toLowerCase());return n&&i});return"loading"===e.status?(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",fontSize:"18px",color:"#666"},children:"Đang tải..."}):e.data&&e.data.user&&"admin"===e.data.user.role?(0,i.jsxs)("div",{className:"max-w-5xl mx-auto py-12 px-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-leaf",children:"Quản l\xfd b\xe0i viết"}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("button",{onClick:()=>ed.push("/admin/reviews"),className:"bg-leaf hover:bg-green-700 text-white px-5 py-2 rounded-lg font-semibold shadow-md transition-colors flex items-center gap-2",children:[(0,i.jsx)("svg",{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),"Quản l\xfd đ\xe1nh gi\xe1"]}),(0,i.jsxs)("button",{onClick:()=>ed.push("/admin/comments"),className:"bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold shadow-md transition-colors flex items-center gap-2",children:[(0,i.jsx)("svg",{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})}),"Quản l\xfd b\xecnh luận"]}),(0,i.jsx)("button",{onClick:()=>ed.push("/admin/articles/new"),className:"bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg font-semibold shadow-md transition-colors",children:"+ Th\xeam b\xe0i viết mới"})]})]}),h&&(0,i.jsxs)("form",{onSubmit:eg,style:{marginBottom:32,background:"#f9f9f9",borderRadius:8,padding:24},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,i.jsx)("button",{type:"button",onClick:()=>f("vi"),style:{fontWeight:"vi"===x?700:400,background:"vi"===x?"#2a7ae4":"#eee",color:"vi"===x?"#fff":"#333",border:"none",borderRadius:6,padding:"6px 18px",cursor:"pointer"},children:"Tiếng Việt"}),(0,i.jsx)("button",{type:"button",onClick:()=>f("en"),style:{fontWeight:"en"===x?700:400,background:"en"===x?"#2a7ae4":"#eee",color:"en"===x?"#fff":"#333",border:"none",borderRadius:6,padding:"6px 18px",cursor:"pointer"},children:"English"})]}),(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("input",{type:"text",placeholder:"vi"===x?"Ti\xeau đề (Tiếng Việt)":"Title (English)",value:y[x],onChange:e=>v({...y,[x]:e.target.value}),required:!0,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc",marginBottom:8}}),(0,i.jsx)("input",{type:"text",placeholder:"vi"===x?"M\xf4 tả ngắn (Tiếng Việt)":"Excerpt (English)",value:b[x],onChange:e=>m({...b,[x]:e.target.value}),required:!0,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc",marginBottom:8}}),(0,i.jsx)("textarea",{placeholder:"vi"===x?"Nội dung (Tiếng Việt)":"Content (English)",value:j[x],onChange:e=>S({...j,[x]:e.target.value}),required:!0,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc",minHeight:80}})]}),(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("label",{style:{fontWeight:500,marginRight:8},children:"Ảnh đại diện:"}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>eu(e,q,K),disabled:J}),J&&(0,i.jsx)("span",{style:{marginLeft:8,color:"#666",fontSize:"14px"},children:"Đang upload..."}),P&&(0,i.jsxs)("div",{style:{display:"inline-block",marginLeft:12,position:"relative"},children:[(0,i.jsx)("img",{src:P,alt:"preview",style:{maxHeight:60,borderRadius:6}}),(0,i.jsx)("button",{type:"button",onClick:()=>q(""),style:{position:"absolute",top:-8,right:-8,background:"#dc3545",color:"#fff",border:"none",borderRadius:"50%",width:20,height:20,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"X\xf3a ảnh",children:"\xd7"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("label",{style:{fontWeight:500,marginRight:8},children:"Tags:"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:6},children:[Q.map(e=>(0,i.jsxs)("span",{style:{background:"#e3f2fd",color:"#1976d2",padding:"4px 10px",borderRadius:12,fontSize:13,marginRight:4,display:"flex",alignItems:"center"},children:[e,(0,i.jsx)("span",{style:{marginLeft:6,cursor:"pointer",fontWeight:700},onClick:()=>G(Q.filter(t=>t!==e)),children:"\xd7"})]},e)),(0,i.jsx)("input",{type:"text",value:et,onChange:e=>en(e.target.value),onKeyDown:e=>{("Enter"===e.key||","===e.key||"Tab"===e.key)&&et.trim()&&(e.preventDefault(),Q.includes(et.trim())||G([...Q,et.trim()]),en(""))},placeholder:"Nhập tag, enter hoặc phẩy để th\xeam",style:{border:"none",outline:"none",minWidth:120}})]}),(0,i.jsxs)("div",{style:{marginTop:8},children:[(0,i.jsx)("div",{style:{fontSize:13,color:"#888",marginBottom:4,fontWeight:500},children:"Chọn nhanh tag:"}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:0===$.filter(e=>!Q.includes(e)).length?(0,i.jsx)("span",{style:{color:"#bbb",fontSize:13},children:"Kh\xf4ng c\xf3 tag n\xe0o"}):$.filter(e=>!Q.includes(e)).map(e=>(0,i.jsxs)("button",{type:"button",style:{background:"#f5f7fa",color:"#1976d2",padding:"6px 16px",borderRadius:16,fontSize:14,border:"1.5px solid #e3f2fd",cursor:"pointer",fontWeight:500,transition:"all 0.18s",outline:"none",boxShadow:"none"},onClick:()=>G([...Q,e]),onMouseOver:e=>e.currentTarget.style.background="#e3f2fd",onMouseOut:e=>e.currentTarget.style.background="#f5f7fa",title:"Chọn tag n\xe0y",children:["+ ",e]},e))})]})]}),(0,i.jsx)("button",{type:"submit",disabled:w,style:{background:"#2a7ae4",color:"#fff",padding:"10px 32px",borderRadius:6,fontWeight:600,border:"none",marginTop:8},children:w?"Đang lưu...":"Lưu b\xe0i viết"}),C&&(0,i.jsx)("div",{style:{color:"red",marginTop:10},children:C})]}),null!==R&&(0,i.jsxs)("form",{onSubmit:ex,style:{marginBottom:32,background:"#fff3cd",padding:24,borderRadius:12,border:"1px solid #ffeaa7"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:16},children:[(0,i.jsx)("button",{type:"button",onClick:()=>B("vi"),style:{fontWeight:"vi"===z?700:400,background:"vi"===z?"#2a7ae4":"#eee",color:"vi"===z?"#fff":"#333",border:"none",borderRadius:6,padding:"6px 18px",cursor:"pointer"},children:"Tiếng Việt"}),(0,i.jsx)("button",{type:"button",onClick:()=>B("en"),style:{fontWeight:"en"===z?700:400,background:"en"===z?"#2a7ae4":"#eee",color:"en"===z?"#fff":"#333",border:"none",borderRadius:6,padding:"6px 18px",cursor:"pointer"},children:"English"})]}),(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("input",{type:"text",placeholder:"vi"===z?"Ti\xeau đề (Tiếng Việt)":"Title (English)",value:E[z],onChange:e=>N({...E,[z]:e.target.value}),required:!0,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc",marginBottom:8}}),(0,i.jsx)("input",{type:"text",placeholder:"vi"===z?"M\xf4 tả ngắn (Tiếng Việt)":"Excerpt (English)",value:A[z],onChange:e=>L({...A,[z]:e.target.value}),required:!0,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc",marginBottom:8}}),(0,i.jsx)("textarea",{placeholder:"vi"===z?"Nội dung (Tiếng Việt)":"Content (English)",value:O[z],onChange:e=>V({...O,[z]:e.target.value}),required:!0,style:{width:"100%",padding:10,borderRadius:6,border:"1px solid #ccc",minHeight:80}})]}),(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("label",{style:{fontWeight:500,marginRight:8},children:"Ảnh đại diện:"}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>eu(e,F,X),disabled:U}),U&&(0,i.jsx)("span",{style:{marginLeft:8,color:"#666",fontSize:"14px"},children:"Đang upload..."}),_&&(0,i.jsxs)("div",{style:{display:"inline-block",marginLeft:12,position:"relative"},children:[(0,i.jsx)("img",{src:_,alt:"preview",style:{maxHeight:60,borderRadius:6}}),(0,i.jsx)("button",{type:"button",onClick:()=>F(""),style:{position:"absolute",top:-8,right:-8,background:"#dc3545",color:"#fff",border:"none",borderRadius:"50%",width:20,height:20,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"X\xf3a ảnh",children:"\xd7"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:12},children:[(0,i.jsx)("label",{style:{fontWeight:500,marginRight:8},children:"Tags:"}),(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginBottom:6},children:[Y.map(e=>(0,i.jsxs)("span",{style:{background:"#e3f2fd",color:"#1976d2",padding:"4px 10px",borderRadius:12,fontSize:13,marginRight:4,display:"flex",alignItems:"center"},children:[e,(0,i.jsx)("span",{style:{marginLeft:6,cursor:"pointer",fontWeight:700},onClick:()=>Z(Y.filter(t=>t!==e)),children:"\xd7"})]},e)),(0,i.jsx)("input",{type:"text",value:ei,onChange:e=>er(e.target.value),onKeyDown:e=>{("Enter"===e.key||","===e.key||"Tab"===e.key)&&ei.trim()&&(e.preventDefault(),Y.includes(ei.trim())||Z([...Y,ei.trim()]),er(""))},placeholder:"Nhập tag, enter hoặc phẩy để th\xeam",style:{border:"none",outline:"none",minWidth:120}})]}),(0,i.jsxs)("div",{style:{marginTop:8},children:[(0,i.jsx)("div",{style:{fontSize:13,color:"#888",marginBottom:4,fontWeight:500},children:"Chọn nhanh tag:"}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:0===$.filter(e=>!Y.includes(e)).length?(0,i.jsx)("span",{style:{color:"#bbb",fontSize:13},children:"Kh\xf4ng c\xf3 tag n\xe0o"}):$.filter(e=>!Y.includes(e)).map(e=>(0,i.jsxs)("button",{type:"button",style:{background:"#f5f7fa",color:"#1976d2",padding:"6px 16px",borderRadius:16,fontSize:14,border:"1.5px solid #e3f2fd",cursor:"pointer",fontWeight:500,transition:"all 0.18s",outline:"none",boxShadow:"none"},onClick:()=>Z([...Y,e]),onMouseOver:e=>e.currentTarget.style.background="#e3f2fd",onMouseOut:e=>e.currentTarget.style.background="#f5f7fa",title:"Chọn tag n\xe0y",children:["+ ",e]},e))})]})]}),(0,i.jsx)("button",{type:"submit",disabled:M,style:{background:"#2a7ae4",color:"#fff",padding:"10px 32px",borderRadius:6,fontWeight:600,border:"none",marginTop:8},children:M?"Đang lưu...":"Lưu thay đổi"}),H&&(0,i.jsx)("div",{style:{color:"red",marginTop:10},children:H})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:16,marginBottom:24,alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)("div",{style:{display:"flex",gap:8},children:["Tất cả",...$].map(e=>(0,i.jsx)("button",{onClick:()=>eo(e),style:{padding:"8px 22px",borderRadius:999,border:"2px solid #2a7ae4",background:ea===e?"#2a7ae4":"#fff",color:ea===e?"#fff":"#2a7ae4",fontWeight:600,fontSize:15,transition:"all 0.2s",cursor:"pointer",outline:"none",minWidth:80},children:e},e))}),(0,i.jsx)("input",{type:"text",placeholder:"T\xecm kiếm ti\xeau đề...",value:el,onChange:e=>es(e.target.value),style:{padding:"8px 16px",borderRadius:8,border:"1.5px solid #bdbdbd",fontSize:15,minWidth:220}})]}),d?(0,i.jsx)("div",{style:{textAlign:"center",padding:40,color:"#666"},children:"Đang tải danh s\xe1ch b\xe0i viết..."}):u?(0,i.jsx)("div",{style:{color:"red",textAlign:"center",padding:40},children:u}):0===ef.length?(0,i.jsx)("div",{style:{textAlign:"center",padding:40,color:"#666"},children:"Kh\xf4ng c\xf3 b\xe0i viết n\xe0o ph\xf9 hợp."}):(0,i.jsx)("div",{style:{overflowX:"auto"},children:(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:12,overflow:"hidden",boxShadow:"0 2px 8px #eee"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{style:{background:"#f5f7fa",color:"#333",fontWeight:700},children:[(0,i.jsx)("th",{style:{padding:"12px 8px",textAlign:"left"},children:"Ti\xeau đề"}),(0,i.jsx)("th",{style:{padding:"12px 8px",textAlign:"left"},children:"Tags"}),(0,i.jsx)("th",{style:{padding:"12px 8px",textAlign:"left"},children:"Ng\xe0y tạo"}),(0,i.jsx)("th",{style:{padding:"12px 8px",textAlign:"left"},children:"T\xe1c giả"}),(0,i.jsx)("th",{style:{padding:"12px 8px",textAlign:"center"},children:"H\xe0nh động"})]})}),(0,i.jsx)("tbody",{children:ef.map(e=>{var t;return(0,i.jsxs)("tr",{style:{borderBottom:"1px solid #f0f0f0"},children:[(0,i.jsx)("td",{style:{padding:"10px 8px",fontWeight:600,color:"#2a7ae4",maxWidth:260,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),(0,i.jsx)("td",{style:{padding:"10px 8px"},children:e.tags&&e.tags.length>0?(0,i.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:e.tags.map(e=>(0,i.jsx)("span",{style:{background:"#e3f2fd",color:"#1976d2",padding:"3px 12px",borderRadius:12,fontSize:13,fontWeight:500},children:e.name},e.name))}):(0,i.jsx)("span",{style:{color:"#aaa"},children:"-"})}),(0,i.jsx)("td",{style:{padding:"10px 8px",color:"#666",fontSize:14},children:new Date(e.createdAt).toLocaleString("vi-VN")}),(0,i.jsx)("td",{style:{padding:"10px 8px",color:"#666",fontSize:14},children:(null===(t=e.author)||void 0===t?void 0:t.email)||"-"}),(0,i.jsxs)("td",{style:{padding:"10px 8px",textAlign:"center"},children:[(0,i.jsx)("button",{onClick:()=>ep(e),style:{background:"#ffc107",color:"#333",padding:"7px 18px",borderRadius:6,border:"none",fontSize:"14px",fontWeight:600,cursor:"pointer",marginRight:8},children:"Sửa"}),(0,i.jsx)("button",{onClick:()=>eh(e.id),style:{background:"#dc3545",color:"#fff",padding:"7px 18px",borderRadius:6,border:"none",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"X\xf3a"})]})]},e.id)})})]})})]}):(0,i.jsx)("div",{style:{textAlign:"center",marginTop:40,color:"red",fontSize:"18px"},children:"Bạn kh\xf4ng c\xf3 quyền truy cập trang n\xe0y."})}},5495:function(e,t,n){"use strict";n.r(t),n.d(t,{LanguageProvider:function(){return s},useLanguage:function(){return d}});var i=n(3827),r=n(4090);let a=(0,r.createContext)(void 0),o={vi:()=>n.e(360).then(n.t.bind(n,5730,19)).then(e=>e.default),en:()=>n.e(121).then(n.t.bind(n,5121,19)).then(e=>e.default)},l={vi:null,en:null};function s(e){let{children:t}=e,[n,s]=(0,r.useState)("vi"),[d,c]=(0,r.useState)({}),[u,g]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{p(!0)},[]),(0,r.useEffect)(()=>{(async()=>{if(h){g(!0);try{if(l[n]){c(l[n]),g(!1);return}let e=await o[n]();l[n]=e,c(e)}catch(e){console.error("Failed to load translations:",e)}finally{g(!1)}}})()},[n,h]),(0,r.useEffect)(()=>{if(h){let e=localStorage.getItem("locale");e&&("vi"===e||"en"===e)&&s(e)}},[h]),(0,r.useEffect)(()=>{h&&(async()=>{try{let[e,t]=await Promise.all([o.vi(),o.en()]);l.vi=e,l.en=t}catch(e){console.error("Failed to preload translations:",e)}})()},[h]),(0,i.jsx)(a.Provider,{value:{locale:n,setLocale:e=>{s(e),h&&localStorage.setItem("locale",e)},t:e=>!h||u?e:d[e]||e,isLoading:u},children:t})}function d(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}}},function(e){e.O(0,[267,971,69,744],function(){return e(e.s=1721)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{8728:function(e,t,n){Promise.resolve().then(n.bind(n,4901))},7907:function(e,t,n){"use strict";var r=n(5313);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},5601:function(e,t){"use strict";function n(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4901:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(3827),a=n(4090),i=n(5601),s=n.n(i),o=n(5495),l=n(7907);function c(){let{t:e,locale:t}=(0,o.useLanguage)(),[n,i]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),d=(0,l.useRouter)(),[f,h]=(0,a.useState)([]),[g,p]=(0,a.useState)("Tất cả");(0,a.useEffect)(()=>{fetch("/api/articles").then(e=>e.json()).then(e=>{console.log("API /api/articles data:",e),i(e),u(!1)})},[]),(0,a.useEffect)(()=>{fetch("/api/tags").then(e=>e.json()).then(e=>h(e.map(e=>e.name)))},[]);let x=n.map(e=>{let t={};try{t=JSON.parse(e.content)}catch(e){}let n=Array.isArray(e.tags)?e.tags.map(e=>e.name?{name:e.name}:e):[];return{...e,content:t,tags:n}}),m="Tất cả"===g?x:x.filter(e=>Array.isArray(e.tags)&&e.tags.some(e=>e.name.trim().toLowerCase()===g.trim().toLowerCase()));return c?(0,r.jsx)("div",{style:{textAlign:"center",padding:40},children:"Đang tải b\xe0i viết..."}):x.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:e("articles.title")}),(0,r.jsx)("meta",{name:"description",content:e("articles.description")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:e("articles.heading")}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:16,marginBottom:24},children:[(0,r.jsx)("div",{style:{display:"flex",gap:12},children:["Tất cả",...f].map(e=>(0,r.jsx)("button",{onClick:()=>p(e),style:{padding:"8px 22px",borderRadius:999,border:"2px solid #2a7ae4",background:g===e?"#2a7ae4":"#fff",color:g===e?"#fff":"#2a7ae4",fontWeight:600,fontSize:15,transition:"all 0.2s",cursor:"pointer",outline:"none",minWidth:80},children:e},e))}),(0,r.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,r.jsxs)("button",{onClick:()=>d.push("/user/favorites"),style:{background:"#E5873E",color:"#fff",border:"none",borderRadius:999,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 8px #f3e0d0",display:"flex",alignItems:"center",gap:6},onMouseOver:e=>{e.currentTarget.style.background="#d17a36"},onMouseOut:e=>{e.currentTarget.style.background="#E5873E"},children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{marginRight:4},children:(0,r.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),"B\xe0i viết y\xeau th\xedch"]}),(0,r.jsxs)("button",{onClick:()=>d.push("/user/history"),style:{background:"#48664E",color:"#fff",border:"none",borderRadius:999,padding:"8px 20px",fontWeight:600,fontSize:15,cursor:"pointer",transition:"all 0.2s",boxShadow:"0 2px 8px #d9e4e2",display:"flex",alignItems:"center",gap:6},onMouseOver:e=>{e.currentTarget.style.background="#3d523e"},onMouseOut:e=>{e.currentTarget.style.background="#48664E"},children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{marginRight:4},children:[(0,r.jsx)("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Lịch sử xem"]})]})]}),(0,r.jsx)("div",{className:"articles-list",children:m.map(e=>{let n=e.content[t]?t:"vi",a=e.content[n]||{};return(0,r.jsxs)("div",{className:"article-card",style:{cursor:"pointer",transition:"transform 0.18s, box-shadow 0.18s",boxShadow:"0 2px 8px #eee",borderRadius:16,background:"#fff",padding:20,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:320},children:[(0,r.jsx)("div",{style:{marginBottom:8},children:e.tags&&e.tags.length>0&&(0,r.jsx)("span",{style:{background:"#e3f2fd",color:"#1976d2",borderRadius:12,padding:"2px 12px",fontSize:13,fontWeight:500},children:e.tags[0].name})}),(0,r.jsx)("h3",{style:{fontWeight:700,fontSize:18,margin:"8px 0 4px 0",color:"#2056c9",cursor:"pointer"},onClick:()=>d.push("/articles/".concat(e.id)),children:a.title||e.title}),(0,r.jsx)("div",{style:{color:"#555",marginBottom:16},children:a.excerpt}),(0,r.jsx)("button",{onClick:()=>d.push("/articles/".concat(e.id)),style:{background:"#2a7ae4",color:"#fff",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:600,cursor:"pointer",alignSelf:"flex-start"},children:"Đọc tiếp →"})]},e.id)})})]})]}):(0,r.jsx)("div",{style:{textAlign:"center",padding:40},children:"Chưa c\xf3 b\xe0i viết n\xe0o."})}},5495:function(e,t,n){"use strict";n.r(t),n.d(t,{LanguageProvider:function(){return l},useLanguage:function(){return c}});var r=n(3827),a=n(4090);let i=(0,a.createContext)(void 0),s={vi:()=>n.e(360).then(n.t.bind(n,5730,19)).then(e=>e.default),en:()=>n.e(121).then(n.t.bind(n,5121,19)).then(e=>e.default)},o={vi:null,en:null};function l(e){let{children:t}=e,[n,l]=(0,a.useState)("vi"),[c,u]=(0,a.useState)({}),[d,f]=(0,a.useState)(!0),[h,g]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{g(!0)},[]),(0,a.useEffect)(()=>{(async()=>{if(h){f(!0);try{if(o[n]){u(o[n]),f(!1);return}let e=await s[n]();o[n]=e,u(e)}catch(e){console.error("Failed to load translations:",e)}finally{f(!1)}}})()},[n,h]),(0,a.useEffect)(()=>{if(h){let e=localStorage.getItem("locale");e&&("vi"===e||"en"===e)&&l(e)}},[h]),(0,a.useEffect)(()=>{h&&(async()=>{try{let[e,t]=await Promise.all([s.vi(),s.en()]);o.vi=e,o.en=t}catch(e){console.error("Failed to preload translations:",e)}})()},[h]),(0,r.jsx)(i.Provider,{value:{locale:n,setLocale:e=>{l(e),h&&localStorage.setItem("locale",e)},t:e=>!h||d?e:c[e]||e,isLoading:d},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=8728)}),_N_E=e.O()}]);
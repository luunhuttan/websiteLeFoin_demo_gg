(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8154:function(e,t,r){Promise.resolve().then(r.t.bind(r,3385,23)),Promise.resolve().then(r.bind(r,5698)),Promise.resolve().then(r.bind(r,1017)),Promise.resolve().then(r.bind(r,5495)),Promise.resolve().then(r.bind(r,4890)),Promise.resolve().then(r.bind(r,4095)),Promise.resolve().then(r.bind(r,5113))},5698:function(e,t,r){"use strict";r.r(t),r.d(t,{DarkModeContext:function(){return o},default:function(){return l}});var n=r(3827),a=r(4090);let o=(0,a.createContext)({dark:!1,toggleDark:()=>{}});function l(e){let{children:t}=e,[r,l]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{"1"===localStorage.getItem("dark-mode")&&(l(!0),document.body.classList.add("dark"))},[]),(0,n.jsx)(o.Provider,{value:{dark:r,toggleDark:()=>{l(e=>(e?(document.body.classList.remove("dark"),localStorage.setItem("dark-mode","0")):(document.body.classList.add("dark"),localStorage.setItem("dark-mode","1")),!e))}},children:t})}},1017:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(5495),a=r(4090);function o(){let{locale:e}=(0,n.useLanguage)();return(0,a.useEffect)(()=>{document.documentElement.lang=e},[e]),null}},5495:function(e,t,r){"use strict";r.r(t),r.d(t,{LanguageProvider:function(){return i},useLanguage:function(){return d}});var n=r(3827),a=r(4090);let o=(0,a.createContext)(void 0),l={vi:()=>r.e(360).then(r.t.bind(r,5730,19)).then(e=>e.default),en:()=>r.e(121).then(r.t.bind(r,5121,19)).then(e=>e.default)},s={vi:null,en:null};function i(e){let{children:t}=e,[r,i]=(0,a.useState)("vi"),[d,c]=(0,a.useState)({}),[u,m]=(0,a.useState)(!0),[f,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{h(!0)},[]),(0,a.useEffect)(()=>{(async()=>{if(f){m(!0);try{if(s[r]){c(s[r]),m(!1);return}let e=await l[r]();s[r]=e,c(e)}catch(e){console.error("Failed to load translations:",e)}finally{m(!1)}}})()},[r,f]),(0,a.useEffect)(()=>{if(f){let e=localStorage.getItem("locale");e&&("vi"===e||"en"===e)&&i(e)}},[f]),(0,a.useEffect)(()=>{f&&(async()=>{try{let[e,t]=await Promise.all([l.vi(),l.en()]);s.vi=e,s.en=t}catch(e){console.error("Failed to preload translations:",e)}})()},[f]),(0,n.jsx)(o.Provider,{value:{locale:r,setLocale:e=>{i(e),f&&localStorage.setItem("locale",e)},t:e=>!f||u?e:d[e]||e,isLoading:u},children:t})}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},5113:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(3827),a=r(1126);function o(e){let{children:t}=e;return(0,n.jsx)(a.SessionProvider,{children:t})}},4890:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(3827),a=r(5495);function o(){let{t:e}=(0,a.useLanguage)();return(0,n.jsx)("footer",{className:"container py-6 mt-auto bg-water",children:(0,n.jsx)("div",{className:"border-t border-water pt-6 text-center text-sm text-hazelnut",children:e("footer.copyright")})})}},4095:function(e,t,r){"use strict";r.r(t),r.d(t,{Header:function(){return v}});var n=r(3827),a=r(8792),o=r(7907),l=r(703),s=r(4090),i=r(5698),d=r(5495);function c(){let{dark:e,toggleDark:t}=(0,s.useContext)(i.DarkModeContext),[r,a]=(0,s.useState)(!1),{t:o}=(0,d.useLanguage)();return(0,n.jsxs)("button",{onClick:()=>{a(!0),t(),setTimeout(()=>a(!1),400)},"aria-label":o("theme.toggle"),style:{marginLeft:18,background:e?"#222":"#eaf6ff",color:e?"#fffbe6":"#2a7ae4",border:"none",borderRadius:18,padding:"7px 16px",fontWeight:600,fontSize:15,cursor:"pointer",boxShadow:"0 2px 8px rgba(42,122,228,0.08)",transition:"background 0.35s, color 0.35s, box-shadow 0.22s",display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("span",{className:"dm-icon-anim".concat(r?" anim":""),style:{display:"inline-block",transition:"transform 0.4s cubic-bezier(0.4,0,0.2,1)"},children:e?"\uD83C\uDF19":"☀️"}),o(e?"theme.dark":"theme.light")]})}function u(){let[e,t]=(0,s.useState)(null),{t:r}=(0,d.useLanguage)(),[a,o]=(0,s.useState)(null),[l,i]=(0,s.useState)(!1),c=(0,s.useRef)(null);if((0,s.useEffect)(()=>{{let e=localStorage.getItem("lefoin_user");e?o(JSON.parse(e)):o(null)}},[]),(0,s.useEffect)(()=>{function e(e){c.current&&!c.current.contains(e.target)&&i(!1)}return l?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]),a){var u,m;return(0,n.jsxs)("div",{style:{position:"relative",marginLeft:18},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",gap:8},onClick:()=>i(e=>!e),children:[(0,n.jsx)("div",{style:{width:32,height:32,borderRadius:"50%",background:"#2a7ae4",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:16},children:(null===(m=a.email)||void 0===m?void 0:null===(u=m[0])||void 0===u?void 0:u.toUpperCase())||"A"}),(0,n.jsx)("span",{style:{fontWeight:600},children:a.email})]}),l&&(0,n.jsxs)("div",{ref:c,style:{position:"absolute",right:0,top:40,background:"#fff",border:"1px solid #eee",borderRadius:8,boxShadow:"0 2px 8px #eee",minWidth:180,zIndex:10},children:[(0,n.jsxs)("div",{style:{padding:12,borderBottom:"1px solid #f5f5f5"},children:[(0,n.jsx)("div",{style:{fontWeight:700},children:a.email}),(0,n.jsx)("div",{style:{fontSize:13,color:"#888"},children:"admin"===a.role?"Admin":"Kh\xe1ch h\xe0ng"})]}),(0,n.jsx)("div",{style:{padding:12},children:(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("lefoin_user"),o(null),i(!1),window.location.reload()},style:{background:"#e53935",color:"#fff",border:"none",borderRadius:6,padding:"8px 16px",width:"100%",fontWeight:600},children:"Đăng xuất"})})]})]})}return(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginLeft:18},children:[(0,n.jsx)("a",{href:"/login",style:{padding:"7px 18px",borderRadius:8,background:"login"===e?"linear-gradient(90deg,#155fa0,#2a7ae4)":"linear-gradient(90deg,#2a7ae4,#4fc3f7)",color:"#fff",fontWeight:600,textDecoration:"none",boxShadow:"0 2px 8px rgba(42,122,228,0.10)",transition:"background 0.18s, transform 0.18s",display:"inline-block",transform:"login"===e?"scale(1.07)":"scale(1)"},onMouseOver:()=>t("login"),onMouseOut:()=>t(null),children:r("auth.login")}),(0,n.jsx)("a",{href:"/register",style:{padding:"7px 18px",borderRadius:8,background:"register"===e?"linear-gradient(90deg,#f6a340,#f6a340)":"linear-gradient(90deg,#f6a340,#ffb347)",color:"#fff",fontWeight:600,textDecoration:"none",boxShadow:"0 2px 8px rgba(246,163,64,0.10)",transition:"background 0.18s, transform 0.18s",display:"inline-block",transform:"register"===e?"scale(1.07)":"scale(1)"},onMouseOver:()=>t("register"),onMouseOut:()=>t(null),children:r("auth.register")})]})}let m=[{code:"vi",label:"VI"},{code:"en",label:"EN"}];function f(){let{locale:e,setLocale:t,isLoading:r}=(0,d.useLanguage)(),[a,o]=(0,s.useState)(!1),l=async r=>{r===e||a||(o(!0),t(r),setTimeout(()=>{o(!1)},300))};return(0,n.jsx)("div",{className:"flex items-center space-x-1 relative",children:m.map(t=>(0,n.jsxs)("button",{onClick:()=>l(t.code),disabled:a||r,className:"px-2 py-1 rounded-md text-xs font-semibold transition-all duration-200 border border-leaf relative\n            ".concat(e===t.code?"bg-amber text-white shadow-md transform scale-105":"bg-water hover:bg-lightTeal text-leaf hover:scale-105","\n            ").concat(a||r?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          "),"aria-current":e===t.code?"true":void 0,children:[t.label,a&&e===t.code&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-3 h-3 border border-leaf border-t-transparent rounded-full animate-spin"})})]},t.code))})}var h=r(1126);let x=(0,s.createContext)(void 0),g={setTheme:e=>{},themes:[]},b=()=>{var e;return null!==(e=(0,s.useContext)(x))&&void 0!==e?e:g};function v(){let e=(0,o.usePathname)(),[t,r]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),{dark:g}=(0,s.useContext)(i.DarkModeContext),{t:v}=(0,d.useLanguage)(),{data:p}=(0,h.useSession)(),y=null==p?void 0:p.user,k=(0,s.useRef)(null),j=(0,s.useRef)(null),[w,N]=(0,s.useState)(!1),{theme:C,setTheme:S}=b(),L=[{name:v("menu.home"),href:"/"},{name:v("menu.articles"),href:"/articles"},{name:v("menu.shop"),href:"/shop"},{name:v("menu.about"),href:"/about"},{name:v("menu.contact"),href:"/contact"}];(0,s.useEffect)(()=>{N(!0)},[]),(0,s.useEffect)(()=>{function e(e){j.current&&!j.current.contains(e.target)&&x(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{k.current&&(k.current.style.opacity="1",setTimeout(()=>{k.current&&(k.current.style.opacity="0")},500))},[g]);let E=async()=>{x(!1),await (0,h.signOut)({redirect:!1}),window.location.href="/"},P=y&&y.avatar?"".concat(y.avatar,"?v=").concat(Date.now()):(null==y?void 0:y.image)?y.image:"/images/avatar-default.png";return w?(0,n.jsxs)("header",{className:"fixed top-0 left-0 right-0 z-50 border-b border-water shadow-md bg-white/90 dark:bg-gray-900/90 backdrop-blur",children:[(0,n.jsx)("div",{className:"header-gradient w-full h-full absolute inset-0 pointer-events-none"}),(0,n.jsx)("div",{ref:k,className:"header-fade-overlay ".concat(g?"dark":"light")}),(0,n.jsxs)("div",{className:"container container-header flex h-16 items-center justify-between relative px-2 md:px-0",children:[(0,n.jsx)("div",{className:"flex-none flex items-center min-w-[120px]",children:(0,n.jsx)(a.default,{href:"/",className:"flex items-center pl-0 ml-0",children:(0,n.jsx)(l.default,{src:g?"/images/logo-lefoin-darkmode.png":"/images/logo-lefoin.png",alt:"LeFoin Logo",width:120,height:40,className:"logo-lefoin h-10 w-auto",priority:!0,style:{objectFit:"contain",height:40,width:120,maxWidth:120}})})}),(0,n.jsxs)("nav",{className:"hidden md:flex items-center gap-x-8 flex-1 justify-center",children:[L.map(t=>(0,n.jsx)(a.default,{href:t.href,className:"px-5 py-2 rounded-lg transition-all duration-150 font-semibold whitespace-nowrap text-base tracking-wide\n                ".concat(e===t.href?"bg-amber text-white shadow font-bold":"text-leaf hover:bg-amber/10 hover:text-amber","\n              "),style:{textAlign:"center",letterSpacing:.2},children:t.name},t.href)),(null==y?void 0:y.role)==="admin"&&(0,n.jsx)(a.default,{href:"/admin/articles",className:"px-5 py-2 rounded-lg transition-all duration-150 font-semibold whitespace-nowrap text-base tracking-wide border border-amber/60\n                ".concat((null==e?void 0:e.startsWith("/admin/articles"))?"bg-amber text-white shadow font-bold":"text-amber hover:bg-amber/10 hover:text-amber bg-amber/10","\n              "),style:{textAlign:"center",letterSpacing:.2},children:"Quản l\xfd"})]}),(0,n.jsxs)("div",{className:"flex-none flex items-center gap-2 md:gap-4 min-w-[120px] justify-end",children:[(0,n.jsx)(f,{}),(0,n.jsx)(c,{}),y&&y.email?(0,n.jsxs)("div",{className:"relative",ref:j,children:[(0,n.jsxs)("button",{onClick:()=>x(!m),className:"flex items-center gap-2 px-2 py-2 rounded-lg text-leaf hover:bg-amber/10 hover:text-amber transition-all duration-150",children:[(0,n.jsx)("div",{className:"w-9 h-9 bg-amber rounded-full flex items-center justify-center text-white font-semibold text-lg overflow-hidden",children:(0,n.jsx)("img",{src:P,alt:"avatar",className:"w-8 h-8 rounded-full object-cover border-2 border-amber"})}),(0,n.jsx)("span",{className:"hidden sm:block font-medium max-w-[100px] truncate",children:y.firstName||y.email}),(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-52 bg-white dark:bg-gray-800 rounded-lg shadow-lg py-1 z-50 border border-gray-200 dark:border-gray-700",children:[(0,n.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-700",children:[(0,n.jsxs)("div",{className:"font-medium",children:[y.firstName," ",y.lastName]}),(0,n.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:y.email})]}),"admin"===y.role&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{href:"/admin/articles",className:"block px-4 py-2 text-sm text-amber font-semibold hover:bg-amber/10",onClick:()=>x(!1),children:"Quản l\xfd b\xe0i viết"}),(0,n.jsx)(a.default,{href:"/admin/reviews",className:"block px-4 py-2 text-sm text-amber font-semibold hover:bg-amber/10",onClick:()=>x(!1),children:"Quản l\xfd đ\xe1nh gi\xe1"})]}),"user"===y.role&&(0,n.jsx)(a.default,{href:"/user/profile",className:"block px-4 py-2 text-sm text-leaf font-semibold hover:bg-amber/10",onClick:()=>x(!1),children:"Trang c\xe1 nh\xe2n"}),(0,n.jsx)("button",{onClick:E,className:"block w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Đăng xuất"})]})]}):(0,n.jsx)(u,{}),(0,n.jsx)("button",{className:"md:hidden p-2 text-leaf hover:text-amber",onClick:()=>r(!t),"aria-label":"Toggle menu",children:t?(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),t&&(0,n.jsxs)("div",{className:"md:hidden border-t border-water bg-water/95 dark:bg-gray-900/95 relative",children:[(0,n.jsx)("div",{className:"header-gradient w-full h-full absolute inset-0 pointer-events-none"}),(0,n.jsxs)("nav",{className:"container py-4 relative flex flex-col gap-2",children:[L.map(t=>(0,n.jsx)(a.default,{href:t.href,className:"mobile-nav-link text-leaf hover:text-amber px-4 py-2 rounded-lg font-semibold text-base ".concat(e===t.href?"bg-amber text-white":""),onClick:()=>r(!1),children:t.name},t.href)),(null==y?void 0:y.role)==="admin"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{href:"/admin/articles",className:"mobile-nav-link text-amber font-bold px-4 py-2 rounded-lg bg-amber/10",onClick:()=>r(!1),children:"Quản l\xfd b\xe0i viết"}),(0,n.jsx)(a.default,{href:"/admin/reviews",className:"mobile-nav-link text-amber font-bold px-4 py-2 rounded-lg bg-amber/10",onClick:()=>r(!1),children:"Quản l\xfd đ\xe1nh gi\xe1"})]}),(null==y?void 0:y.role)==="user"&&(0,n.jsx)(a.default,{href:"/user/profile",className:"mobile-nav-link text-leaf font-bold px-4 py-2 rounded-lg bg-amber/10",onClick:()=>r(!1),children:"Trang c\xe1 nh\xe2n"}),y&&(0,n.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4",children:[(0,n.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:[(0,n.jsxs)("div",{className:"font-medium",children:[y.firstName," ",y.lastName]}),(0,n.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:y.email})]}),(0,n.jsx)("button",{onClick:E,className:"mobile-nav-link text-red-600 dark:text-red-400 px-4 py-2 rounded-lg",children:"Đăng xuất"})]})]})]})]}):null}},3385:function(){}},function(e){e.O(0,[267,792,703,971,69,744],function(){return e(e.s=8154)}),_N_E=e.O()}]);
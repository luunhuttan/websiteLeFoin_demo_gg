(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7009:function(e,t,n){Promise.resolve().then(n.bind(n,8836))},7907:function(e,t,n){"use strict";var r=n(5313);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},5601:function(e,t){"use strict";function n(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8836:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(3827),a=n(4090),i=n(5601),s=n.n(i),o=n(5495),l=n(7907),c=n(5115);let d=[{vi:"Tất cả",en:"All"},{vi:"Sản phẩm",en:"Products"},{vi:"C\xe2u chuyện",en:"Stories"},{vi:"Sống xanh",en:"Green Living"}];function u(){var e,t,n,i,u,h;let{t:f,locale:x}=(0,o.useLanguage)(),[g,m]=(0,a.useState)([]),[p,v]=(0,a.useState)(!0),[b,j]=(0,a.useState)("Tất cả"),[y,w]=(0,a.useState)(1),[k,N]=(0,a.useState)(!1),[S,R]=(0,a.useState)(""),[T,C]=(0,a.useState)(!1),[P,E]=(0,a.useState)([]),[L,O]=(0,a.useState)("Tất cả"),_=(0,a.useRef)(null),A=(0,l.useSearchParams)(),M=d.map(e=>e[x]);(0,a.useEffect)(()=>{j(M[0])},[x]),(0,a.useEffect)(()=>{fetch("/api/articles").then(e=>e.json()).then(e=>{m(e),v(!1)})},[]),(0,a.useEffect)(()=>{fetch("/api/tags").then(e=>e.json()).then(e=>{Array.isArray(e)?E(["Tất cả",...e.map(e=>e.name)]):E(["Tất cả"])})},[]),(0,a.useEffect)(()=>{if(0===P.length)return;let e=null==A?void 0:A.get("tag");e&&P.includes(e)?(O(e),w(1),setTimeout(()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)):O("Tất cả")},[A,P]);let W=g.map(e=>{let t={};try{t=JSON.parse(e.content)}catch(e){}let n=Array.isArray(e.tags)?e.tags.map(e=>e.name?e:e.tag).filter(Boolean):[],r=n.map(e=>e.name);return{...e,content:t,tags:r,tagObjs:n}}),z="Tất cả"===L?W:W.filter(e=>Array.isArray(e.tags)&&e.tags.includes(L)),B=Math.ceil(z.length/6),I=z.slice((y-1)*6,6*y),F=z[0];function D(e){e>=1&&e<=B&&w(e)}return((0,a.useEffect)(()=>{let e=()=>{N(window.scrollY>200)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),p)?(0,r.jsx)("div",{style:{textAlign:"center",padding:40},children:"Đang tải b\xe0i viết..."}):F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:f("home.title")}),(0,r.jsx)("meta",{name:"description",content:f("home.description")}),(0,r.jsx)("meta",{property:"og:title",content:f("home.title")}),(0,r.jsx)("meta",{property:"og:description",content:f("home.description")}),(0,r.jsx)("meta",{property:"og:image",content:"/images/og-lefoin.jpg"}),(0,r.jsx)("meta",{property:"og:url",content:"https://lefoin.vn/"}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{name:"twitter:title",content:f("home.title")}),(0,r.jsx)("meta",{name:"twitter:description",content:f("home.description")}),(0,r.jsx)("meta",{name:"twitter:image",content:"/images/og-lefoin.jpg"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,r.jsxs)("section",{className:"featured-article",children:[(0,r.jsx)("img",{src:(null===(t=F.content)||void 0===t?void 0:null===(e=t[x])||void 0===e?void 0:e.image)||"/images/og-lefoin.jpg",alt:F.title}),(0,r.jsxs)("div",{className:"featured-content",children:[(0,r.jsx)("span",{className:"category",children:null===(i=F.content)||void 0===i?void 0:null===(n=i[x])||void 0===n?void 0:n.category}),(0,r.jsx)("h2",{children:F.title.split(" / ")["vi"===x?0:1]}),(0,r.jsx)("p",{children:null===(h=F.content)||void 0===h?void 0:null===(u=h[x])||void 0===u?void 0:u.excerpt})]})]}),(0,r.jsxs)("section",{className:"hero",children:[(0,r.jsx)("h1",{children:f("home.hero.title")}),(0,r.jsx)("p",{children:f("home.hero.subtitle")}),(0,r.jsxs)("a",{href:"/articles",className:"cta",children:[f("home.hero.cta"),(0,r.jsx)("svg",{viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M7 5l5 5-5 5",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),(0,r.jsxs)("section",{className:"articles",ref:_,children:[(0,r.jsx)("h2",{children:f("home.featured.title")}),(0,r.jsx)("div",{style:{textAlign:"center",marginBottom:32,display:"flex",flexWrap:"wrap",justifyContent:"center",gap:8},children:P.map((e,t)=>(0,r.jsx)("button",{onClick:()=>{O(e),w(1),setTimeout(()=>{var e;null===(e=_.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)},"aria-label":"Lọc b\xe0i viết theo tag: "+e,title:"Tất cả"===e?"Xem tất cả b\xe0i viết":'Xem c\xe1c b\xe0i viết với tag " '.concat(e,' "'),style:{margin:0,padding:"8px 20px",borderRadius:20,border:"Tất cả"===e?"none":L===e?"none":"1.5px solid #2a7ae4",background:L===e?"#2a7ae4":"Tất cả"===e?"#1976d2":"#fff",color:L===e||"Tất cả"===e?"#fff":"#2a7ae4",fontWeight:600,fontSize:"1rem",boxShadow:L===e?"0 2px 8px rgba(42,122,228,0.10)":"none",cursor:"pointer",transition:"all 0.18s",minWidth:80,outline:L===e?"2px solid #1565c0":"none",position:"relative"},onMouseOver:t=>t.currentTarget.style.background=L===e?"#1565c0":"#e3f2fd",onMouseOut:t=>t.currentTarget.style.background=L===e?"#2a7ae4":"Tất cả"===e?"#1976d2":"#fff",children:e},e))}),(0,r.jsx)("div",{className:"articles-list",children:I.map(e=>{var t,n,a,i,s,o,l,c;return(0,r.jsxs)("div",{className:"article-card",style:{borderRadius:18,background:"#fff",boxShadow:"0 2px 12px #eee",padding:0,overflow:"hidden",display:"flex",flexDirection:"column",minHeight:380,marginBottom:24},children:[(0,r.jsx)("img",{src:(null===(n=e.content)||void 0===n?void 0:null===(t=n[x])||void 0===t?void 0:t.image)||"/images/og-lefoin.jpg",alt:(null===(i=e.content)||void 0===i?void 0:null===(a=i[x])||void 0===a?void 0:a.title)||e.title,style:{width:"100%",height:180,objectFit:"cover",borderTopLeftRadius:18,borderTopRightRadius:18}}),(0,r.jsxs)("div",{style:{padding:20,flex:1,display:"flex",flexDirection:"column"},children:[Array.isArray(e.tagObjs)&&e.tagObjs.length>0&&(0,r.jsx)("span",{style:{background:"#e3f2fd",color:"#1976d2",borderRadius:12,padding:"2px 12px",fontSize:13,fontWeight:500,marginBottom:8,alignSelf:"flex-start"},children:e.tagObjs[0].name}),(0,r.jsx)("h3",{style:{fontWeight:700,fontSize:18,margin:"8px 0 4px 0",color:"#2056c9",cursor:"pointer"},onClick:()=>window.location.href="/articles/".concat(e.id),children:(null===(o=e.content)||void 0===o?void 0:null===(s=o[x])||void 0===s?void 0:s.title)||e.title}),(0,r.jsx)("div",{style:{color:"#555",marginBottom:16,flex:1},children:null===(c=e.content)||void 0===c?void 0:null===(l=c[x])||void 0===l?void 0:l.excerpt}),(0,r.jsx)("button",{onClick:()=>window.location.href="/articles/".concat(e.id),style:{background:"#2a7ae4",color:"#fff",border:"none",borderRadius:8,padding:"8px 20px",fontWeight:600,cursor:"pointer",alignSelf:"flex-start"},children:"Đọc tiếp →"})]})]},e.id)})}),B>1&&(0,r.jsxs)("div",{className:"pagination",children:[(0,r.jsx)("button",{onClick:()=>D(y-1),disabled:1===y,style:{padding:"8px 16px",margin:"0 4px",border:"none",borderRadius:8,background:1===y?"#f0f0f0":"#2a7ae4",color:1===y?"#999":"#fff",cursor:1===y?"not-allowed":"pointer",transition:"all 0.18s"},children:"←"}),Array.from({length:B},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>D(e),style:{padding:"8px 16px",margin:"0 4px",border:"none",borderRadius:8,background:y===e?"#2a7ae4":"#fff",color:y===e?"#fff":"#2a7ae4",cursor:"pointer",transition:"all 0.18s",boxShadow:y===e?"0 2px 8px rgba(42,122,228,0.10)":"none"},children:e},e)),(0,r.jsx)("button",{onClick:()=>D(y+1),disabled:y===B,style:{padding:"8px 16px",margin:"0 4px",border:"none",borderRadius:8,background:y===B?"#f0f0f0":"#2a7ae4",color:y===B?"#999":"#fff",cursor:y===B?"not-allowed":"pointer",transition:"all 0.18s"},children:"→"})]})]}),(0,r.jsx)("section",{className:"review-summary",style:{padding:"60px 20px",background:"#f8f9fa"},children:(0,r.jsx)("div",{className:"container",style:{maxWidth:"1200px",margin:"0 auto"},children:(0,r.jsx)(c.Z,{})})}),(0,r.jsx)("section",{className:"newsletter",children:(0,r.jsxs)("div",{className:"newsletter-content",children:[(0,r.jsx)("h2",{children:"Đăng k\xfd nhận tin tức"}),(0,r.jsx)("p",{children:"Nhận th\xf4ng tin mới nhất về sản phẩm v\xe0 b\xe0i viết từ Le Foin"}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S.trim()&&S.includes("@")&&(C(!0),R(""),setTimeout(()=>C(!1),4e3))},className:"newsletter-form",children:[(0,r.jsx)("input",{type:"email",placeholder:"Nhập email của bạn",value:S,onChange:e=>R(e.target.value),required:!0,style:{padding:"12px 16px",borderRadius:8,border:"1px solid #ddd",fontSize:"1rem",width:"300px",marginRight:"12px"}}),(0,r.jsx)("button",{type:"submit",style:{padding:"12px 24px",borderRadius:8,border:"none",background:"#2a7ae4",color:"#fff",fontSize:"1rem",fontWeight:600,cursor:"pointer",transition:"background 0.18s"},children:"Đăng k\xfd"})]}),T&&(0,r.jsx)("p",{style:{color:"#2ecc71",marginTop:"12px"},children:"Cảm ơn bạn đ\xe3 đăng k\xfd! Ch\xfang t\xf4i sẽ gửi tin tức mới nhất đến email của bạn."})]})}),k&&(0,r.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),style:{position:"fixed",bottom:"20px",right:"20px",width:"50px",height:"50px",borderRadius:"50%",background:"#2a7ae4",color:"#fff",border:"none",cursor:"pointer",boxShadow:"0 4px 12px rgba(42,122,228,0.3)",transition:"all 0.18s",zIndex:1e3},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow="0 6px 16px rgba(42,122,228,0.4)"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(42,122,228,0.3)"},children:"↑"})]}):(0,r.jsx)("div",{style:{textAlign:"center",padding:40},children:"Chưa c\xf3 b\xe0i viết n\xe0o."})}},5495:function(e,t,n){"use strict";n.r(t),n.d(t,{LanguageProvider:function(){return l},useLanguage:function(){return c}});var r=n(3827),a=n(4090);let i=(0,a.createContext)(void 0),s={vi:()=>n.e(360).then(n.t.bind(n,5730,19)).then(e=>e.default),en:()=>n.e(121).then(n.t.bind(n,5121,19)).then(e=>e.default)},o={vi:null,en:null};function l(e){let{children:t}=e,[n,l]=(0,a.useState)("vi"),[c,d]=(0,a.useState)({}),[u,h]=(0,a.useState)(!0),[f,x]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{x(!0)},[]),(0,a.useEffect)(()=>{(async()=>{if(f){h(!0);try{if(o[n]){d(o[n]),h(!1);return}let e=await s[n]();o[n]=e,d(e)}catch(e){console.error("Failed to load translations:",e)}finally{h(!1)}}})()},[n,f]),(0,a.useEffect)(()=>{if(f){let e=localStorage.getItem("locale");e&&("vi"===e||"en"===e)&&l(e)}},[f]),(0,a.useEffect)(()=>{f&&(async()=>{try{let[e,t]=await Promise.all([s.vi(),s.en()]);o.vi=e,o.en=t}catch(e){console.error("Failed to preload translations:",e)}})()},[f]),(0,r.jsx)(i.Provider,{value:{locale:n,setLocale:e=>{l(e),f&&localStorage.setItem("locale",e)},t:e=>!f||u?e:c[e]||e,isLoading:u},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},5115:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(3827),a=n(4090);function i(e){let{productId:t}=e,[n,i]=(0,a.useState)(null),[s,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{l()},[t]);let l=async()=>{try{let e=await fetch(t?"/api/reviews/stats?productId=".concat(t):"/api/reviews/stats");if(e.ok){let t=await e.json();i(t)}}catch(e){console.error("Error fetching review stats:",e)}finally{o(!1)}};return s?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-amber-500"}),(0,r.jsx)("p",{className:"mt-2",children:"Đang tải thống k\xea..."})]}):n&&0!==n.totalReviews?(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-leaf mb-4",children:"Đ\xe1nh gi\xe1 từ kh\xe1ch h\xe0ng"}),(0,r.jsxs)("div",{className:"flex items-center gap-6 mb-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-amber-600",children:n.averageRating}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Điểm trung b\xecnh"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(e=>{let t=Math.floor(e),n=e%1!=0;return(0,r.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,r.jsx)("span",{className:"text-lg",children:e<=t?"⭐":e===t+1&&n?"⭐":"☆"},e))})})(Math.round(n.averageRating)),(0,r.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["(",n.totalReviews," đ\xe1nh gi\xe1)"]})]}),(0,r.jsx)("div",{className:"space-y-1",children:[5,4,3,2,1].map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm w-8",children:[e,"⭐"]}),(0,r.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-amber-500 h-2 rounded-full",style:{width:"".concat(n.totalReviews>0?n.ratingCounts[e]/n.totalReviews*100:0,"%")}})}),(0,r.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300 w-8",children:n.ratingCounts[e]})]},e))})]})]}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Dựa tr\xean ",n.totalReviews," đ\xe1nh gi\xe1 từ kh\xe1ch h\xe0ng thực tế"]})})]}):null}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=7009)}),_N_E=e.O()}]);
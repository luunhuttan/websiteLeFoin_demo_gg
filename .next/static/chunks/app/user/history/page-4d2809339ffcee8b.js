(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[512],{2337:function(e,t,i){Promise.resolve().then(i.bind(i,1320))},1320:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var r=i(3827),n=i(4090),a=i(1126),o=i(7907),l=i(2458);function s(){let{data:e,status:t}=(0,a.useSession)(),i=(0,o.useRouter)(),[s,c]=(0,n.useState)([]),[d,x]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{if("loading"!==t){if(!e){i.push("/auth");return}fetch("/api/user/history").then(e=>e.json()).then(e=>{e.articles&&c(e.articles),x(!1)}).catch(e=>{console.error("Error fetching history:",e),x(!1)})}},[e,t,i]),"loading"===t||d)?(0,r.jsx)("div",{style:{textAlign:"center",padding:"60px 20px",background:"linear-gradient(135deg, #D9E4E2 0%, #AFCBBB 100%)",minHeight:"100vh"},children:(0,r.jsx)("div",{style:{fontSize:"18px",color:"#7A5C42"},children:"Đang tải lịch sử xem..."})}):e?(0,r.jsx)("div",{style:{background:"linear-gradient(135deg, #D9E4E2 0%, #AFCBBB 100%)",minHeight:"100vh",padding:"40px 20px"},children:(0,r.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto"},children:[(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,r.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#7A5C42",textAlign:"center",marginBottom:"10px",fontFamily:"Playfair Display, serif"},children:"Lịch sử xem b\xe0i viết"}),(0,r.jsx)("p",{style:{textAlign:"center",color:"#48664E",fontSize:"1.1rem",marginBottom:"40px"},children:"Những b\xe0i viết bạn đ\xe3 xem gần đ\xe2y"})]}),0===s.length?(0,r.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},style:{textAlign:"center",padding:"60px 20px",background:"rgba(255, 255, 255, 0.8)",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[(0,r.jsx)("div",{style:{fontSize:"4rem",marginBottom:"20px"},children:"\uD83D\uDCD6"}),(0,r.jsx)("h3",{style:{fontSize:"1.5rem",color:"#7A5C42",marginBottom:"10px",fontWeight:"600"},children:"Chưa c\xf3 lịch sử xem"}),(0,r.jsx)("p",{style:{color:"#48664E",marginBottom:"30px",fontSize:"1rem"},children:"H\xe3y kh\xe1m ph\xe1 c\xe1c b\xe0i viết để tạo lịch sử xem nh\xe9!"}),(0,r.jsx)("button",{onClick:()=>i.push("/articles"),style:{background:"#E5873E",color:"#fff",border:"none",borderRadius:"50px",padding:"12px 24px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(229, 135, 62, 0.3)"},onMouseOver:e=>{e.currentTarget.style.background="#d17a36",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(229, 135, 62, 0.4)"},onMouseOut:e=>{e.currentTarget.style.background="#E5873E",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(229, 135, 62, 0.3)"},children:"Kh\xe1m ph\xe1 b\xe0i viết"})]}):(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px"},children:s.map((e,t)=>{let n={};try{n=JSON.parse(e.content)}catch(e){}let a=n.vi||n.en||{};return(0,r.jsxs)(l.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},style:{background:"rgba(255, 255, 255, 0.9)",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"pointer"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-8px)",e.currentTarget.style.boxShadow="0 12px 40px rgba(0,0,0,0.15)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 8px 32px rgba(0,0,0,0.1)"},onClick:()=>i.push("/articles/".concat(e.id)),children:[(0,r.jsx)("img",{src:a.image||"/images/og-lefoin.jpg",alt:a.title||e.title,style:{width:"100%",height:"200px",objectFit:"cover"}}),(0,r.jsxs)("div",{style:{padding:"24px"},children:[(0,r.jsx)("h3",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#7A5C42",marginBottom:"12px",lineHeight:"1.4",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a.title||e.title}),(0,r.jsx)("p",{style:{color:"#48664E",fontSize:"0.95rem",lineHeight:"1.6",marginBottom:"16px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:a.excerpt||"Kh\xf4ng c\xf3 m\xf4 tả"}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)("span",{style:{color:"#E5873E",fontSize:"0.9rem",fontWeight:"600"},children:new Date(e.createdAt).toLocaleDateString("vi-VN")}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:"#48664E"},children:[(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(0,r.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"600"},children:new Date(e.viewedAt).toLocaleDateString("vi-VN")})]})]})]})]},e.id)})})]})}):null}}},function(e){e.O(0,[267,458,971,69,744],function(){return e(e.s=2337)}),_N_E=e.O()}]);